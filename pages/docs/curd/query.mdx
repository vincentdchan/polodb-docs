# Query

## Find

The `find()` method is used to query a collection for documents that match specific query criteria.
When called with no arguments, the `find()` method returns a cursor pointing to the results.
You can manipulate the cursor to retrieve the data from the database.

```rust
#[derive(Debug, Serialize, Deserialize)]
struct Book {
   title: String,
   author: String,
}

let db = Database::open_memory()?;
let collection = db.collection::<Book>("books");

let docs = vec![
    Book { title: "1984".to_string(), author: "George Orwell".to_string() },
    Book { title: "Animal Farm".to_string(), author: "George Orwell".to_string() },
    Book { title: "The Great Gatsby".to_string(), author: "F. Scott Fitzgerald".to_string() },
];
collection.insert_many(docs)?;

let books = collection.find(None)?;
for book in books {
    println!("name: {:?}", book);
}
```

**Example:**

If we want to find a book written by George Orwell, we can find using the author's name like this:

```rust
let books = collection.find(doc! {
    "author": "George Orwell",
})?;

for book in books {
    println!("name: {:?}", book);
}
```

## Specify `AND` Conditions

A compond query can specify conditions for more than one field in the collection's documents.
Implicit `AND` conjunction of the query clauses.

```rust
collection.find(doc! {
    "author": "George Orwell",
    "title": "1984",
})?;
```

## Specify `OR` Conditions

Using the `$or` operator, you can specify a compound query that joins each clause with a logical `OR` conjunction
so that the query selects the documents in the collection that match at least one condition.

```rust
let result = typed_collection
    .find(doc! {
        "$or": [
            {
                "title": "The Grapes of Wrath",
            },
            {
                "title": "To Kill a Mockingbird",
            }
        ]
    })?
    .collect::<Result<Vec<Document>>>()?;
```

## Advanced condition

| Name | Description                                                         |
| ---- | ------------------------------------------------------------------- |
| $eq  | Matches values that are equal to a specified value.                 |
| $gt  | Matches values that are greater than a specified value.             |
| $gte | Matches values that are greater than or equal to a specified value. |
| $in  | Matches any of the values specified in an array.                    |
| $lt  | Matches values that are less than a specified value.                |
| $lte | Matches values that are less than or equal to a specified value.    |
| $ne  | Matches all values that are not equal to a specified value.         |
| $nin | Matches none of the values specified in an array.                   |

### Specify `GT` Conditions

```rust
collection.find(doc! {
    "age": { "$gt": 18 },
})?;
```

The above query is specifying that the age field must be greater than 18.
